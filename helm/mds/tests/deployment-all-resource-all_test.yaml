suite: test deployment agency default
templates:
  - deployment.yaml
tests:
  - it: doc 0
    set:
      apis:
        mds-agency:
          resourcesLimitsCpu: 250m
          resourcesLimitsMemory: 256Mi
          resourcesRequestsCpu: 5m
          resourcesRequestsMemory: 13Mi
        mds-audit:
          resourcesLimitsCpu: 251m
          resourcesLimitsMemory: 257Mi
          resourcesRequestsCpu: 6m
          resourcesRequestsMemory: 14Mi
        mds-compliance:
          resourcesLimitsCpu: 252m
          resourcesLimitsMemory: 258Mi
          resourcesRequestsCpu: 7m
          resourcesRequestsMemory: 15Mi
        mds-daily:
          resourcesLimitsCpu: 253m
          resourcesLimitsMemory: 259Mi
          resourcesRequestsCpu: 8m
          resourcesRequestsMemory: 16Mi
        mds-native:
          resourcesLimitsCpu: 254m
          resourcesLimitsMemory: 260Mi
          resourcesRequestsCpu: 9m
          resourcesRequestsMemory: 17Mi
        mds-policy:
          resourcesLimitsCpu: 255m
          resourcesLimitsMemory: 261Mi
          resourcesRequestsCpu: 10m
          resourcesRequestsMemory: 18Mi
        mds-policy-author:
          resourcesLimitsCpu: 256m
          resourcesLimitsMemory: 262Mi
          resourcesRequestsCpu: 11m
          resourcesRequestsMemory: 19Mi
    release:
      namespace: mds
    asserts:
      - isAPIVersion:
          of: apps/v1
        documentIndex: 0
      - isKind:
          of: Deployment
        documentIndex: 0
      - equal:
          path: metadata.name
          value: mds-agency
        documentIndex: 0
      - equal:
          path: metadata.labels.app
          value: mds-agency
        documentIndex: 0
      - equal:
          path: metadata.namespace
          value: mds
        documentIndex: 0
      - equal:
          path: spec.template.spec.containers[0].resources.limits.cpu
          value: 250m
        documentIndex: 0
      - equal:
          path: spec.template.spec.containers[0].resources.limits.memory
          value: 256Mi
        documentIndex: 0
      - equal:
          path: spec.template.spec.containers[0].resources.requests.cpu
          value: 5m
        documentIndex: 0
      - equal:
          path: spec.template.spec.containers[0].resources.requests.memory
          value: 13Mi
        documentIndex: 0
      - isAPIVersion:
          of: apps/v1
        documentIndex: 1
      - isKind:
          of: Deployment
        documentIndex: 1
      - equal:
          path: metadata.name
          value: mds-audit
        documentIndex: 1
      - equal:
          path: metadata.labels.app
          value: mds-audit
        documentIndex: 1
      - equal:
          path: metadata.namespace
          value: mds
        documentIndex: 1
      - equal:
          path: spec.template.spec.containers[0].resources.limits.cpu
          value: 251m
        documentIndex: 1
      - equal:
          path: spec.template.spec.containers[0].resources.limits.memory
          value: 257Mi
        documentIndex: 1
      - equal:
          path: spec.template.spec.containers[0].resources.requests.cpu
          value: 6m
        documentIndex: 1
      - equal:
          path: spec.template.spec.containers[0].resources.requests.memory
          value: 14Mi
        documentIndex: 1
      - isAPIVersion:
          of: apps/v1
        documentIndex: 2
      - isKind:
          of: Deployment
        documentIndex: 2
      - equal:
          path: metadata.name
          value: mds-compliance
        documentIndex: 2
      - equal:
          path: metadata.labels.app
          value: mds-compliance
        documentIndex: 2
      - equal:
          path: metadata.namespace
          value: mds
        documentIndex: 2
      - equal:
          path: spec.template.spec.containers[0].resources.limits.cpu
          value: 252m
        documentIndex: 2
      - equal:
          path: spec.template.spec.containers[0].resources.limits.memory
          value: 258Mi
        documentIndex: 2
      - equal:
          path: spec.template.spec.containers[0].resources.requests.cpu
          value: 7m
        documentIndex: 2
      - equal:
          path: spec.template.spec.containers[0].resources.requests.memory
          value: 15Mi
        documentIndex: 2
      - isAPIVersion:
          of: apps/v1
        documentIndex: 3
      - isKind:
          of: Deployment
        documentIndex: 3
      - equal:
          path: metadata.name
          value: mds-daily
        documentIndex: 3
      - equal:
          path: metadata.labels.app
          value: mds-daily
        documentIndex: 3
      - equal:
          path: metadata.namespace
          value: mds
        documentIndex: 3
      - equal:
          path: spec.template.spec.containers[0].resources.limits.cpu
          value: 253m
        documentIndex: 3
      - equal:
          path: spec.template.spec.containers[0].resources.limits.memory
          value: 259Mi
        documentIndex: 3
      - equal:
          path: spec.template.spec.containers[0].resources.requests.cpu
          value: 8m
        documentIndex: 3
      - equal:
          path: spec.template.spec.containers[0].resources.requests.memory
          value: 16Mi
        documentIndex: 3
      - isAPIVersion:
          of: apps/v1
        documentIndex: 4
      - isKind:
          of: Deployment
        documentIndex: 4
      - equal:
          path: metadata.name
          value: mds-native
        documentIndex: 4
      - equal:
          path: metadata.labels.app
          value: mds-native
        documentIndex: 4
      - equal:
          path: metadata.namespace
          value: mds
        documentIndex: 4
      - equal:
          path: spec.template.spec.containers[0].resources.limits.cpu
          value: 254m
        documentIndex: 4
      - equal:
          path: spec.template.spec.containers[0].resources.limits.memory
          value: 260Mi
        documentIndex: 4
      - equal:
          path: spec.template.spec.containers[0].resources.requests.cpu
          value: 9m
        documentIndex: 4
      - equal:
          path: spec.template.spec.containers[0].resources.requests.memory
          value: 17Mi
        documentIndex: 4
      - isAPIVersion:
          of: apps/v1
        documentIndex: 5
      - isKind:
          of: Deployment
        documentIndex: 5
      - equal:
          path: metadata.name
          value: mds-policy
        documentIndex: 5
      - equal:
          path: metadata.labels.app
          value: mds-policy
        documentIndex: 5
      - equal:
          path: metadata.namespace
          value: mds
        documentIndex: 5
      - equal:
          path: spec.template.spec.containers[0].resources.limits.cpu
          value: 255m
        documentIndex: 5
      - equal:
          path: spec.template.spec.containers[0].resources.limits.memory
          value: 261Mi
        documentIndex: 5
      - equal:
          path: spec.template.spec.containers[0].resources.requests.cpu
          value: 10m
        documentIndex: 5
      - equal:
          path: spec.template.spec.containers[0].resources.requests.memory
          value: 18Mi
        documentIndex: 5
      - isAPIVersion:
          of: apps/v1
        documentIndex: 6
      - isKind:
          of: Deployment
        documentIndex: 6
      - equal:
          path: metadata.name
          value: mds-policy-author
        documentIndex: 6
      - equal:
          path: metadata.labels.app
          value: mds-policy-author
        documentIndex: 6
      - equal:
          path: metadata.namespace
          value: mds
        documentIndex: 6
      - equal:
          path: spec.template.spec.containers[0].resources.limits.cpu
          value: 256m
        documentIndex: 6
      - equal:
          path: spec.template.spec.containers[0].resources.limits.memory
          value: 262Mi
        documentIndex: 6
      - equal:
          path: spec.template.spec.containers[0].resources.requests.cpu
          value: 11m
        documentIndex: 6
      - equal:
          path: spec.template.spec.containers[0].resources.requests.memory
          value: 19Mi
        documentIndex: 6
